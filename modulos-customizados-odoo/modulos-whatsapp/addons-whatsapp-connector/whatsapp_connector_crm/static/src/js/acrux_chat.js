odoo.define("whatsapp_connector_crm.acrux_chat",(function(require){"use strict";var chat=require("whatsapp_connector.chat_classes"),AcruxChatAction=require("whatsapp_connector.acrux_chat").AcruxChatAction,core=require("web.core"),_t=core._t,QWeb=core.qweb;return AcruxChatAction.include({events:_.extend({},AcruxChatAction.prototype.events,{"click li#tab_crm_lead":"tabCrmLead"}),_initRender:function(){return this._super().then((()=>{this.$tab_content_lead=this.$("div#tab_content_crm_lead > div.o_group")}))},tabCrmLead:function(_event,data){let out=Promise.reject();if(this.selected_conversation)if(this.selected_conversation.isMine()){let lead_id=this.selected_conversation.crm_lead_id;this.saveDestroyWidget("crm_lead_form");let options={context:this.action.context,crm_lead:lead_id,action_manager:this.action_manager,searchButton:!0,title:_t("CRM")};this.crm_lead_form=new chat.CrmLeadForm(this,options),this.$tab_content_lead.empty(),out=this.crm_lead_form.appendTo(this.$tab_content_lead)}else this.$tab_content_lead.html(QWeb.render("acrux_empty_tab",{notYourConv:!0}));else this.$tab_content_lead.html(QWeb.render("acrux_empty_tab"));return out.then((()=>data&&data.resolve&&data.resolve())),out.catch((()=>data&&data.reject&&data.reject())),out},tabsClear:function(){this._super(),this.saveDestroyWidget("crm_lead_form")},_getMaximizeTabs:function(){let out=this._super();return out.push("#tab_content_crm_lead"),out},isChatroomTab:function(jsId){return this._super(jsId)||this._isChatroomTab("crm_lead_form",jsId)}}),AcruxChatAction}));